// ============================================================================
// Add PlannerController to relevant ReStock modules
// ============================================================================

// only crewable launch towers like the FASA Launch Tower
@PART[*]:HAS[@MODULE[ModuleGenerator],@MODULE[ModuleRestockLaunchClamp],@MODULE[Habitat],!MODULE[PlannerController]:HAS[#title[generator]]]:AFTER[KerbalismDefault]:NEEDS[ReStock]
{
  MODULE
  {
	name = PlannerController
	title = generator
	considered = false
  }
}

// only "normal" launch clamps
@PART[*]:HAS[@MODULE[ModuleGenerator],@MODULE[ModuleRestockLaunchClamp],!MODULE[Habitat],!MODULE[PlannerController]:HAS[#title[generator]]]:AFTER[KerbalismDefault]:NEEDS[ReStock]
{
  MODULE
  {
	name = PlannerController
	title = generator
	considered = false
  }
}

// only crewable launch towers like the FASA Launch Tower
@PART[*]:HAS[@MODULE[ProcessController]:HAS[#resource[_ECGen]],@MODULE[ModuleRestockLaunchClamp],@MODULE[Habitat],!MODULE[PlannerController]:HAS[#title[generator]]]:AFTER[KerbalismDefault]:NEEDS[ReStock]
{
  MODULE
  {
	name = PlannerController
	title = generator
	considered = false
  }
}

// only "normal" launch clamps
@PART[*]:HAS[@MODULE[ProcessController]:HAS[#resource[_ECGen]],@MODULE[ModuleRestockLaunchClamp],!MODULE[Habitat],!MODULE[PlannerController]:HAS[#title[generator]]]:AFTER[KerbalismDefault]:NEEDS[ReStock]
{
  MODULE
  {
	name = PlannerController
	title = generator
	considered = false
  }
}

@PART[*]:HAS[@MODULE[ModuleRestockLaunchClamp],@MODULE[Habitat],#CrewCapacity[>0]]:AFTER[KerbalismDefault]:NEEDS[FeatureHabitat,ReStock]
{
	@MODULE[Habitat]
	{
		state = disabled
	}
}
